{"version":3,"sources":["services/phonebook.js","components/Persons.js","components/Filter.js","components/PersonForm.js","components/Phonebook.js","components/App.js","index.js"],"names":["baseUrl","axios","get","then","res","data","catch","err","console","log","payload","post","id","put","delete","Numbers","persons","filter","handleDelete","handleDisplayPerson","map","person","key","name","number","onClick","lowerCaseName","toLowerCase","lowerCaseFilter","includes","Filter","handleFilter","onChange","PersonForm","handleSubmit","handleOnNameChange","handleOnNumberChange","onSubmit","value","type","Phonebook","newFilter","App","useState","setPersons","newName","setNewName","newNumber","setNewNumber","setNewFilter","searchCountry","setCountries","useEffect","phoneBookservice","handleCreate","newPerson","handleUpdate","window","confirm","e","target","preventDefault","verifyName","every","verifyNumber","alert","toUpdateId","reduce","current","oldPersonList","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.93ac7030.chunk.js","sourcesContent":["import axios from 'axios';\r\nconst baseUrl = 'http://localhost:3001/phonebook';\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl)\r\n  return (\r\n    request\r\n      .then(res => res.data)\r\n      .catch(err => console.log(err))\r\n  )\r\n}\r\nconst createItem = ( payload ) => {\r\n  const request = axios.post(baseUrl, payload)\r\n  return (\r\n    request\r\n      .then(res => res.data)\r\n      .catch(err => console.log(err))\r\n  )\r\n}\r\n\r\nconst updateItem = (id,payload) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, payload);\r\n  return (\r\n    request\r\n      .then(res =>  res)\r\n      .catch(err => console.log(err))\r\n  )\r\n}\r\n\r\nconst deleteItem = ( id ) => {\r\n  const request = axios.delete(`${baseUrl}/${id}`);\r\n  return (\r\n    request\r\n      .then(res => res)\r\n      .catch(err => console.log(err))\r\n  )\r\n}\r\n\r\n\r\nexport default {\r\n  getAll,\r\n  createItem,\r\n  updateItem,\r\n  deleteItem\r\n}\r\n","import React from 'react';\r\n\r\nconst Numbers = ({ persons, filter, handleDelete }) => {\r\n  const handleDisplayPerson = persons.map(person => {\r\n    if (!filter) return <div key={person.id}>{person.name} {person.number} <button onClick={handleDelete(person.id)}>delete</button></div>\r\n    const lowerCaseName  = person.name.toLowerCase();\r\n    const lowerCaseFilter = filter.toLowerCase();\r\n\r\n    if (lowerCaseName.includes(lowerCaseFilter)) {\r\n      return <div key={person.name}>{person.name} {person.number} <button onClick={handleDelete}>delete</button></div>\r\n    }\r\n    return <div />;\r\n  })\r\n\r\n  return (\r\n    <div>\r\n      {handleDisplayPerson}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Numbers;","import React from 'react';\r\n\r\nconst Filter = ({ handleFilter }) =>  <div>filter by name: <input onChange={handleFilter} /></div>\r\n\r\nexport default Filter;","import React from 'react';\r\n\r\nconst PersonForm = ({ handleSubmit, handleOnNameChange, handleOnNumberChange, name, number }) => {\r\n  return (\r\n    <form onSubmit={handleSubmit}>\r\n      <h2>Add new:</h2>\r\n      <div>\r\n        name: <input onChange={handleOnNameChange} value={name} />\r\n      </div>\r\n      <div>\r\n        number: <input onChange={handleOnNumberChange} value={number} />\r\n      </div>\r\n      <div>\r\n        <button type=\"submit\">add</button>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default PersonForm;","import React from 'react';\r\n\r\nimport Numbers from './Persons';\r\nimport Filter from './Filter';\r\nimport PersonForm from './PersonForm';\r\n\r\nconst Phonebook = ({ handleFilter, handleOnNameChange, handleOnNumberChange, handleSubmit, persons, newFilter, handleDelete, name, number }) => {\r\n  return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n      <Filter handleFilter={handleFilter} />\r\n      <PersonForm \r\n        handleSubmit={handleSubmit} \r\n        handleOnNameChange={handleOnNameChange} \r\n        handleOnNumberChange={handleOnNumberChange} \r\n        name={name}\r\n        number={number}\r\n      />\r\n      <h2>Numbers</h2>\r\n      <Numbers \r\n        persons={persons} \r\n        filter={newFilter} \r\n        handleDelete={handleDelete}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Phonebook;","import React, { useState, useEffect } from 'react'\r\nimport axios from 'axios';\r\nimport phoneBookservice from '../services/phonebook'\r\n// import Numbers from './Persons';\r\n// import Filter from './Filter';\r\n// import PersonForm from './PersonForm';\r\nimport Phonebook from './Phonebook';\r\nimport Countries from './Countries';\r\n\r\n\r\nconst App = () => {\r\n  const [ persons, setPersons] = useState([])\r\n  const [ newName, setNewName ] = useState('')\r\n  const [ newNumber, setNewNumber ] = useState('');\r\n  const [ newFilter, setNewFilter ] = useState('');\r\n  const [ searchCountry, setSearchCountry ] = useState('');\r\n  const [ countries, setCountries ] = useState([]);\r\n\r\n  const handleOnNameChange = (e) => setNewName(e.target.value);\r\n  const handleOnNumberChange = (e) => setNewNumber(e.target.value);\r\n  const handleFilter = (e) => setNewFilter(e.target.value);\r\n  const verifyDuplicateName = (name) => persons.every(person => person.name !== name);\r\n  const verifyDuplicateNumber = (number) => persons.every(person => person.number !== number);\r\n  const handleCountry = (e) => setSearchCountry(e.target.value);\r\n\r\n  useEffect(() => {\r\n    phoneBookservice\r\n      .getAll()\r\n      .then(res => setPersons(res))\r\n      .catch(err => console.log(err))\r\n  }, []);\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    const verifyName = verifyDuplicateName(newName);\r\n    const verifyNumber = verifyDuplicateNumber(newNumber);\r\n    const newPerson = {\r\n      name: newName,\r\n      number: newNumber\r\n    }\r\n    if (verifyName) {\r\n      handleCreate(newPerson);\r\n    } else if (!verifyName && verifyNumber) {\r\n      const toUpdateId = persons.reduce(((id, current) => {\r\n        if (current.name === newName) {\r\n          id += current.id;\r\n        }\r\n        return id;\r\n      }), 0);\r\n      handleUpdate(toUpdateId, newPerson);\r\n    } else {\r\n      return alert(`${newName} is already in the phone book`)\r\n    }\r\n  }\r\n\r\n  const handleCreate = (newPerson) => {\r\n    return phoneBookservice\r\n      .createItem(newPerson)\r\n      .then(res => {\r\n        setPersons(res)\r\n        setNewName('')\r\n        setNewNumber('')\r\n      })  \r\n  }\r\n\r\n  const handleUpdate = (id, payload) => {\r\n    if (window.confirm(`Do you want to update ${newName}'s number?`))\r\n    return phoneBookservice\r\n      .updateItem(id, payload)\r\n      .then(res => {\r\n        setPersons(res.data);\r\n        setNewName('');\r\n        setNewNumber('');\r\n      })\r\n  }\r\n\r\n  const handleDelete = (id) => () => {\r\n    if (window.confirm(`Do you want to delete ${newName}?`)) {\r\n      phoneBookservice\r\n        .deleteItem(id)\r\n        .then(res => {\r\n          const oldPersonList = persons.filter(person => {\r\n            if (person.id !== id) {\r\n              return person\r\n            }\r\n          });\r\n          setPersons(oldPersonList)\r\n          setNewName('')\r\n          setNewNumber('');\r\n        })\r\n    }\r\n  }\r\n\r\n  const countriesQuery = () => {\r\n    if (!searchCountry) return;\r\n    axios.get(`https://restcountries.eu/rest/v2/name/${searchCountry}`)\r\n      .then(res => {\r\n        setCountries(res.data);\r\n      })\r\n  }\r\n\r\n  useEffect(countriesQuery, [searchCountry]);\r\n\r\n  return (\r\n    <div>\r\n      <Phonebook \r\n        handleFilter={handleFilter}\r\n        handleOnNameChange={handleOnNameChange}\r\n        handleOnNumberChange={handleOnNumberChange}\r\n        handleSubmit={handleSubmit}\r\n        persons={persons}\r\n        newFilter={newFilter}\r\n        handleDelete={handleDelete}\r\n        name={newName}\r\n        number={newNumber}\r\n      />\r\n      {/* <div>Find Countries: <input onChange={handleCountry} /></div>\r\n      <Countries countries={countries} /> */}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport App from './components/App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}